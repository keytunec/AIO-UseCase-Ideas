<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMM RAG Assistant Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .back-btn {
            background: #E20074;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #c50062;
            transform: translateY(-2px);
        }

        /* Landing Page Grid */
        .use-cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .use-case-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(226, 0, 116, 0.2);
            border-color: #E20074;
        }

        .use-case-card .emoji {
            font-size: 3rem;
            display: block;
            margin-bottom: 15px;
        }

        .use-case-card h3 {
            color: #E20074;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .use-case-card p {
            color: #666;
            line-height: 1.6;
        }

        /* Use Case View Layout */
        .use-case-view {
            display: none;
            height: calc(100vh - 100px);
        }

        .use-case-content {
            display: flex;
            height: 100%;
            gap: 20px;
        }

        .sidebar {
            width: 300px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .sidebar.collapsed {
            width: 60px;
            padding: 20px 10px;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .sidebar h3 {
            color: #333;
            font-size: 1.1rem;
        }

        .collapse-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #666;
        }

        .data-source {
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInUp 0.3s ease forwards;
        }

        .data-source label {
            display: flex;
            align-items: center;
            color: #555;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .data-source label:hover {
            background: #f0f7ff;
        }

        .data-source input {
            margin-right: 10px;
            accent-color: #E20074;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: white;
            color: #E20074;
            border-bottom: 2px solid #E20074;
        }

        .tab-content {
            display: none;
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        /* Chat Interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .message {
            margin-bottom: 20px;
            opacity: 0;
            animation: messageSlide 0.5s ease forwards;
        }

        .message.user {
            text-align: right;
        }

        .message-content {
            display: inline-block;
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.5;
        }

        .message.user .message-content {
            background: #E20074;
            color: white;
        }

        .message.assistant .message-content {
            background: #f1f3f5;
            color: #333;
        }

        .thinking-indicator {
            background: #e3f2fd;
            color: #1976d2;
            padding: 10px 15px;
            border-radius: 12px;
            margin: 10px 0;
            font-size: 13px;
            font-style: italic;
            animation: pulse 2s infinite;
        }

        .chat-input-area {
            padding: 20px;
            background: #f8f9fa;
        }

        .prompt-suggestions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .prompt-btn {
            background: #e3f2fd;
            color: #1976d2;
            border: 1px solid #bbdefb;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prompt-btn:hover {
            background: #bbdefb;
            transform: translateY(-1px);
        }

        .input-row {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: #E20074;
        }

        .send-btn {
            background: #E20074;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            background: #c50062;
            transform: scale(1.05);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .action-btn {
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            opacity: 0.5;
            transition: all 0.3s ease;
            color: white;
        }

        .action-btn.active {
            opacity: 1;
        }

        .action-btn.active:hover {
            transform: translateY(-2px);
        }

        .action-btn.primary { background: #E20074; }
        .action-btn.success { background: #4caf50; }
        .action-btn.info { background: #2196F3; }
        .action-btn.warning { background: #ff9800; }

        .prompt-library-btn {
            background: #9c27b0;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .prompt-library-btn:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }

        /* Workflow Editor */
        .workflow-editor {
            position: relative;
            height: 100%;
            background: #f5f7fa;
            border-radius: 8px;
            overflow: hidden;
        }

        .workflow-toolbar {
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .node-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .node-btn:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .workflow-canvas {
            position: relative;
            height: calc(100% - 70px);
            overflow: auto;
        }

        .workflow-node {
            position: absolute;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            min-width: 150px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: move;
            transition: all 0.3s ease;
        }

        .workflow-node:hover {
            border-color: #E20074;
            transform: scale(1.02);
        }

        .workflow-node h4 {
            color: #333;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .workflow-node p {
            color: #666;
            font-size: 12px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .prompt-search {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            margin-bottom: 20px;
            outline: none;
        }

        .prompt-search:focus {
            border-color: #E20074;
        }

        .prompt-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prompt-item:hover {
            background: #e9ecef;
            border-color: #E20074;
        }

        .prompt-item h4 {
            color: #E20074;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .prompt-item p {
            color: #666;
            font-size: 13px;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .use-case-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
            }
            
            .main-content {
                order: 1;
                height: 400px;
            }
            
            .prompt-suggestions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Landing Page -->
        <div id="landing-page">
            <div class="header">
                <h1>AMM RAG Assistant Platform</h1>
                <p>Intelligent Application Modernization & Management through AI-powered knowledge assistance</p>
            </div>
            
            <div class="use-cases-grid">
                <div class="use-case-card" onclick="openUseCase('doc-inconsistencies')">
                    <span class="emoji">🔍</span>
                    <h3>Detect Document Inconsistencies</h3>
                    <p>Scan documentation for duplicate or contradictory information about application configurations and deployment procedures.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('tag-documents')">
                    <span class="emoji">🏷️</span>
                    <h3>Tag Inconsistent Documents</h3>
                    <p>Automatically identify and tag legacy application docs that need review due to inconsistencies or outdated information.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('project-reports')">
                    <span class="emoji">📊</span>
                    <h3>Create Stakeholder Reports</h3>
                    <p>Generate comprehensive modernization progress reports and status updates for stakeholders and executive teams.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('rca-support')">
                    <span class="emoji">🔬</span>
                    <h3>RCA Support</h3>
                    <p>Analyze root causes for outages and incidents in legacy applications, providing detailed findings and recommendations.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('self-service')">
                    <span class="emoji">🤖</span>
                    <h3>Self-Service Support</h3>
                    <p>Reduce support agent workload by providing automated solutions for common legacy application issues.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('ticket-routing')">
                    <span class="emoji">🎯</span>
                    <h3>Smart Ticket Routing</h3>
                    <p>Automatically route and dispatch tickets to the right subject matter experts based on application portfolio mapping.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('context-enrichment')">
                    <span class="emoji">💡</span>
                    <h3>Context Enrichment</h3>
                    <p>Enhance tickets with technical context, business impact analysis, and application dependency information.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('log-monitoring')">
                    <span class="emoji">📈</span>
                    <h3>Log Pattern Analysis</h3>
                    <p>Monitor and search for recurring error patterns and anomalies in legacy application logs and performance metrics.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('pipeline-analysis')">
                    <span class="emoji">⚙️</span>
                    <h3>Pipeline Error Analysis</h3>
                    <p>Analyze deployment pipeline failures and provide automated restart capabilities for legacy application updates.</p>
                </div>
            </div>
        </div>

        <!-- Use Case View -->
        <div id="use-case-view" class="use-case-view">
            <button class="back-btn" onclick="showLandingPage()">← Back to Use Cases</button>
            
            <div class="use-case-content">
                <!-- Sidebar -->
                <div id="sidebar" class="sidebar">
                    <div class="sidebar-header">
                        <h3>Data Sources</h3>
                        <button class="collapse-btn" onclick="toggleSidebar()">‹›</button>
                    </div>
                    <div id="data-sources-list" class="data-sources-list">
                        <!-- Data sources will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Main Content -->
                <div class="main-content">
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('chat')">Chat Interface</button>
                        <button class="tab" onclick="switchTab('workflow')">Workflow Editor</button>
                    </div>

                    <!-- Chat Tab -->
                    <div id="chat-tab" class="tab-content active">
                        <div class="chat-container">
                            <div class="chat-messages" id="chat-messages">
                                <div class="message assistant">
                                    <div class="message-content">
                                        Hello! I'm your AMM RAG assistant. How can I help you with application modernization and management today? Feel free to use the suggested prompts below or ask me anything related to your selected use case.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chat-input-area">
                                <div class="prompt-suggestions" id="prompt-suggestions">
                                    <!-- Prompt suggestions will be populated by JavaScript -->
                                </div>
                                
                                <div class="input-row">
                                    <input type="text" id="chat-input" class="chat-input" placeholder="Type your message here..." onkeypress="handleKeyPress(event)">
                                    <button class="send-btn" onclick="sendMessage()">Send</button>
                                </div>
                                
                                <div class="action-buttons" id="action-buttons">
                                    <!-- Action buttons will be populated by JavaScript -->
                                    <button class="prompt-library-btn" onclick="openPromptLibrary()">Prompt Library</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Workflow Tab -->
                    <div id="workflow-tab" class="tab-content">
                        <div class="workflow-editor">
                            <div class="workflow-toolbar">
                                <button class="node-btn" onclick="addWorkflowNode('trigger')">+ Trigger</button>
                                <button class="node-btn" onclick="addWorkflowNode('function')">+ Function</button>
                                <button class="node-btn" onclick="addWorkflowNode('condition')">+ Condition</button>
                                <button class="node-btn" onclick="addWorkflowNode('output')">+ Output</button>
                            </div>
                            <div class="workflow-canvas" id="workflow-canvas">
                                <!-- Initial workflow nodes -->
                                <div class="workflow-node" style="top: 50px; left: 50px;">
                                    <h4>🎯 Analysis Trigger</h4>
                                    <p>Activates when analysis yields actionable results</p>
                                </div>
                                <div class="workflow-node" style="top: 50px; left: 250px;">
                                    <h4>🔧 Process Results</h4>
                                    <p>Analyzes and formats the findings</p>
                                </div>
                                <div class="workflow-node" style="top: 50px; left: 450px;">
                                    <h4>📤 Execute Action</h4>
                                    <p>Performs the configured AMM workflow</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Library Modal -->
    <div id="prompt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>AMM Prompt Library</h3>
                <button class="close-btn" onclick="closePromptLibrary()">&times;</button>
            </div>
            <input type="text" class="prompt-search" placeholder="Search AMM prompts..." id="prompt-search" oninput="filterPrompts()">
            <div id="prompt-library-content">
                <!-- Prompt library items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Use case configurations with AMM-specific data
        const useCaseConfigs = {
            "doc-inconsistencies": {
                title: "Document Inconsistency Detection",
                dataSources: [
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "sharepoint", name: "SharePoint", checked: true },
                    { id: "doc-repos", name: "Document Repositories", checked: true },
                    { id: "version-control", name: "Version Control", checked: false }
                ],
                promptSuggestions: [
                    "Scan our documentation for duplicate or contradictory information about application configurations",
                    "Are there conflicting deployment procedures documented across teams?",
                    "Identify inconsistent API documentation versions"
                ],
                actionButtons: [
                    { text: "Flag Inconsistent Docs", class: "warning", active: false },
                    { text: "Notify Documentation Owner", class: "info", active: false },
                    { text: "Generate Consolidation Report", class: "primary", active: false },
                    { text: "Create Cleanup Task in Jira", class: "success", active: false }
                ]
            },
            "tag-documents": {
                title: "Document Tagging System",
                dataSources: [
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "sharepoint", name: "SharePoint", checked: true },
                    { id: "version-control", name: "Version Control", checked: true }
                ],
                promptSuggestions: [
                    "Which legacy application docs need review due to inconsistencies?",
                    "Tag outdated integration documentation",
                    "Mark conflicting configuration guides for modernization review"
                ],
                actionButtons: [
                    { text: "Auto-Tag Document", class: "primary", active: false },
                    { text: "Send Notification to SME", class: "info", active: false },
                    { text: "Add to Modernization Backlog", class: "warning", active: false },
                    { text: "Schedule Review Meeting", class: "success", active: false }
                ]
            },
            "project-reports": {
                title: "Stakeholder Report Generation",
                dataSources: [
                    { id: "jira", name: "Jira", checked: true },
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "teams", name: "MS Teams", checked: true },
                    { id: "powerbi", name: "PowerBI", checked: true }
                ],
                promptSuggestions: [
                    "Generate weekly modernization progress report for stakeholders",
                    "What's the current status of critical application migrations?",
                    "Show budget vs. actual spending for AMM projects"
                ],
                actionButtons: [
                    { text: "Share on MS Teams Channel", class: "info", active: false },
                    { text: "Export as Executive Summary", class: "primary", active: false },
                    { text: "Send to Stakeholder List", class: "success", active: false },
                    { text: "Post on Yammer Portal", class: "warning", active: false }
                ]
            },
            "rca-support": {
                title: "Root Cause Analysis Support",
                dataSources: [
                    { id: "jira", name: "Jira", checked: true },
                    { id: "servicenow", name: "ServiceNow", checked: true },
                    { id: "log-management", name: "Log Management", checked: true },
                    { id: "monitoring", name: "Monitoring Tools", checked: true }
                ],
                promptSuggestions: [
                    "Analyze root causes for recent outages in legacy applications",
                    "What are common failure patterns in our critical manufacturing apps?",
                    "Provide RCA findings for last week's finance system incident"
                ],
                actionButtons: [
                    { text: "Create Detailed RCA Ticket", class: "primary", active: false },
                    { text: "Assign to Specialist Team", class: "warning", active: false },
                    { text: "Share with Change Advisory", class: "info", active: false },
                    { text: "Update Knowledge Base", class: "success", active: false }
                ]
            },
            "self-service": {
                title: "Self-Service Support Automation",
                dataSources: [
                    { id: "servicenow", name: "ServiceNow", checked: true },
                    { id: "knowledge-base", name: "Knowledge Base", checked: true },
                    { id: "chatbot-analytics", name: "Chatbot Analytics", checked: true }
                ],
                promptSuggestions: [
                    "Show me the top 10 support requests for legacy applications",
                    "How can users self-resolve common ERP integration issues?",
                    "Provide automated solutions for frequent database connectivity problems"
                ],
                actionButtons: [
                    { text: "Launch Guided Troubleshooting", class: "primary", active: false },
                    { text: "Create Interactive FAQ", class: "info", active: false },
                    { text: "Deploy Chatbot Response", class: "success", active: false },
                    { text: "Generate How-to Video", class: "warning", active: false }
                ]
            },
            "ticket-routing": {
                title: "Intelligent Ticket Routing",
                dataSources: [
                    { id: "servicenow", name: "ServiceNow", checked: true },
                    { id: "jira", name: "Jira", checked: true },
                    { id: "active-directory", name: "Active Directory", checked: true }
                ],
                promptSuggestions: [
                    "Route this manufacturing system ticket to the right SME",
                    "Which team handles legacy mainframe applications?",
                    "Auto-assign tickets based on application portfolio mapping"
                ],
                actionButtons: [
                    { text: "Auto-Assign to Resolver Group", class: "primary", active: false },
                    { text: "Escalate to On-Call Expert", class: "warning", active: false },
                    { text: "Update SLA Clock", class: "info", active: false },
                    { text: "Notify Application Owner", class: "success", active: false }
                ]
            },
            "context-enrichment": {
                title: "Domain Knowledge Context",
                dataSources: [
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "app-portfolio", name: "Application Portfolio", checked: true },
                    { id: "cmdb", name: "CMDB", checked: true }
                ],
                promptSuggestions: [
                    "Provide technical context for this legacy SAP integration issue",
                    "What's the business impact of this manufacturing application outage?",
                    "Enrich this ticket with application dependency information"
                ],
                actionButtons: [
                    { text: "Attach Application Architecture", class: "primary", active: false },
                    { text: "Link Dependency Map", class: "info", active: false },
                    { text: "Share Impact Analysis", class: "warning", active: false },
                    { text: "Add Business Context Notes", class: "success", active: false }
                ]
            },
            "log-monitoring": {
                title: "Log Pattern & Anomaly Detection",
                dataSources: [
                    { id: "splunk", name: "Splunk", checked: true },
                    { id: "elk-stack", name: "ELK Stack", checked: true },
                    { id: "app-logs", name: "Application Logs", checked: true },
                    { id: "apm-tools", name: "APM Tools", checked: true }
                ],
                promptSuggestions: [
                    "Show me recurring error patterns in our ERP system logs",
                    "Analyze manufacturing application performance degradations",
                    "Find correlation between infrastructure and application errors"
                ],
                actionButtons: [
                    { text: "Generate Trend Analysis", class: "primary", active: false },
                    { text: "Create Proactive Alert", class: "warning", active: false },
                    { text: "Open Preventive Maintenance", class: "success", active: false },
                    { text: "Notify Infrastructure Team", class: "info", active: false }
                ]
            },
            "pipeline-analysis": {
                title: "CI/CD Pipeline Analysis",
                dataSources: [
                    { id: "jenkins", name: "Jenkins", checked: true },
                    { id: "gitlab-ci", name: "GitLab CI", checked: true },
                    { id: "azure-devops", name: "Azure DevOps", checked: true },
                    { id: "jira", name: "Jira", checked: false }
                ],
                promptSuggestions: [
                    "Analyze deployment pipeline failures for legacy applications",
                    "Why did the manufacturing system update pipeline fail?",
                    "Show pipeline health for critical application modernization"
                ],
                actionButtons: [
                    { text: "Auto-Restart Pipeline", class: "success", active: false },
                    { text: "Log Detailed Error Analysis", class: "primary", active: false },
                    { text: "Notify DevOps Team", class: "info", active: false },
                    { text: "Create Improvement Story", class: "warning", active: false }
                ]
            }
        };

        // Enhanced prompt library with AMM-specific prompts
        const promptLibrary = [
            {
                title: "Legacy Application Assessment",
                description: "Evaluate this legacy application for modernization readiness, including technical debt, dependencies, and business criticality.",
                category: "assessment"
            },
            {
                title: "Migration Risk Analysis",
                description: "Analyze potential risks and mitigation strategies for migrating this application to cloud-native architecture.",
                category: "planning"
            },
            {
                title: "Performance Baseline Documentation",
                description: "Document current performance metrics and establish baselines for post-modernization comparison and SLA definition.",
                category: "documentation"
            },
            {
                title: "Stakeholder Impact Communication",
                description: "Create stakeholder-appropriate communication materials explaining the impact and timeline of this modernization effort.",
                category: "communication"
            },
            {
                title: "Technical Debt Prioritization",
                description: "Prioritize technical debt items based on business impact, modernization goals, and available resources.",
                category: "planning"
            },
            {
                title: "Integration Mapping Analysis",
                description: "Map all integration points for this application and assess modernization impact on connected systems.",
                category: "analysis"
            }
        ];

        let currentUseCase = null;
        let activeActionButtons = [];

        function showLandingPage() {
            document.getElementById('landing-page').style.display = 'block';
            document.getElementById('use-case-view').style.display = 'none';
            currentUseCase = null;
        }

        function openUseCase(useCaseId) {
            currentUseCase = useCaseId;
            const config = useCaseConfigs[useCaseId];
            
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('use-case-view').style.display = 'block';
            
            // Update data sources
            const dataSourcesList = document.getElementById('data-sources-list');
            dataSourcesList.innerHTML = '';
            
            config.dataSources.forEach((source, index) => {
                const dataSourceEl = document.createElement('div');
                dataSourceEl.className = 'data-source';
                dataSourceEl.style.animationDelay = `${index * 0.1}s`;
                dataSourceEl.innerHTML = `
                    <label>
                        <input type="checkbox" ${source.checked ? 'checked' : ''} id="${source.id}">
                        ${source.name}
                    </label>
                `;
                dataSourcesList.appendChild(dataSourceEl);
            });
            
            // Update prompt suggestions
            const promptSuggestions = document.getElementById('prompt-suggestions');
            promptSuggestions.innerHTML = '';
            
            config.promptSuggestions.forEach(prompt => {
                const button = document.createElement('button');
                button.className = 'prompt-btn';
                button.textContent = prompt;
                button.onclick = () => usePrompt(prompt);
                promptSuggestions.appendChild(button);
            });
            
            // Update action buttons
            const actionButtons = document.getElementById('action-buttons');
            const promptLibraryBtn = actionButtons.querySelector('.prompt-library-btn');
            actionButtons.innerHTML = '';
            
            config.actionButtons.forEach((action, index) => {
                const button = document.createElement('button');
                button.className = `action-btn ${action.class}`;
                button.textContent = action.text;
                button.id = `action-${index}`;
                button.onclick = () => executeAction(action.text, index);
                actionButtons.appendChild(button);
            });
            
            actionButtons.appendChild(promptLibraryBtn);
            activeActionButtons = [...config.actionButtons];
            
            // Reset chat
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.innerHTML = `
                <div class="message assistant">
                    <div class="message-content">
                        Hello! I'm your ${config.title} assistant. How can I help you with application modernization and management today? Feel free to use the suggested prompts below or ask me anything related to ${config.title.toLowerCase()}.
                    </div>
                </div>
            `;
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        function usePrompt(prompt) {
            document.getElementById('chat-input').value = prompt;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            const chatMessages = document.getElementById('chat-messages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<div class="message-content">${message}</div>`;
            chatMessages.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Simulate thinking and response
            setTimeout(() => {
                const thinkingEl = document.createElement('div');
                thinkingEl.className = 'thinking-indicator';
                thinkingEl.textContent = '🤔 Analyzing your AMM request and searching relevant data sources...';
                chatMessages.appendChild(thinkingEl);
                
                setTimeout(() => {
                    thinkingEl.textContent = '🔍 Found relevant information from application portfolio and knowledge base...';
                    
                    setTimeout(() => {
                        thinkingEl.textContent = '⚡ Generating response using RAG with AMM domain expertise...';
                        
                        setTimeout(() => {
                            thinkingEl.remove();
                            
                            // Add assistant response
                            const assistantMessage = document.createElement('div');
                            assistantMessage.className = 'message assistant';
                            assistantMessage.innerHTML = `
                                <div class="message-content">
                                    Based on the AMM data sources and your application portfolio, I've analyzed the request. 
                                    ${getContextualResponse(message)}
                                    
                                    <br><br>Select the appropriate action buttons below to proceed with the recommended next steps.
                                </div>
                            `;
                            chatMessages.appendChild(assistantMessage);
                            
                            // Activate action buttons
                            activeActionButtons.forEach((action, index) => {
                                const btn = document.getElementById(`action-${index}`);
                                if (btn) {
                                    btn.classList.add('active');
                                }
                            });
                            
                            // Scroll to bottom
                            chatMessages.scrollTop = chatMessages.scrollHeight;
                        }, 1500);
                    }, 1000);
                }, 1000);
            }, 500);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getContextualResponse(message) {
            if (!currentUseCase) return "I can help you with that AMM request.";
            
            const responses = {
                "doc-inconsistencies": "I've found 15 documentation conflicts across your application portfolio. The main inconsistencies are in deployment procedures and API specifications.",
                "tag-documents": "I've identified 23 legacy documents requiring review. Most are related to outdated integration patterns and deprecated configuration guides.",
                "project-reports": "Based on current project data, 67% of critical applications are on track for modernization. Budget utilization is at 84% with 2 months remaining.",
                "rca-support": "Analysis shows the root cause is related to connection pool exhaustion in the legacy database tier. Similar patterns detected in 3 other applications.",
                "self-service": "I found 12 frequently reported issues that can be resolved through automated self-service. This could reduce L1 tickets by approximately 35%.",
                "ticket-routing": "Based on application expertise mapping, this ticket should be routed to the Manufacturing Systems team. SME: Sarah Johnson has 85% resolution rate for similar issues.",
                "context-enrichment": "This application has 14 critical dependencies and impacts 3 business processes. Estimated business impact: $50K/hour during outages.",
                "log-monitoring": "I've detected recurring error patterns in the ERP system logs occurring every 4 hours. This suggests a batch job timing issue.",
                "pipeline-analysis": "The deployment pipeline failed due to dependency conflicts in the legacy libraries. Similar failures occurred in 3 other modernization projects."
            };
            
            return responses[currentUseCase] || "I can help you with that AMM request.";
        }

        function executeAction(actionText, index) {
            const btn = document.getElementById(`action-${index}`);
            if (!btn || !btn.classList.contains('active')) return;
            
            const chatMessages = document.getElementById('chat-messages');
            const actionMessage = document.createElement('div');
            actionMessage.className = 'message assistant';
            actionMessage.innerHTML = `
                <div class="message-content">
                    ✅ <strong>${actionText}</strong> has been executed successfully!
                    <br><br>
                    The requested AMM workflow action has been completed and relevant stakeholders have been notified.
                </div>
            `;
            chatMessages.appendChild(actionMessage);
            
            // Deactivate button
            btn.classList.remove('active');
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function openPromptLibrary() {
            document.getElementById('prompt-modal').style.display = 'block';
            populatePromptLibrary();
        }

        function closePromptLibrary() {
            document.getElementById('prompt-modal').style.display = 'none';
        }

        function populatePromptLibrary() {
            const container = document.getElementById('prompt-library-content');
            container.innerHTML = '';
            
            promptLibrary.forEach(prompt => {
                const promptEl = document.createElement('div');
                promptEl.className = 'prompt-item';
                promptEl.innerHTML = `
                    <h4>${prompt.title}</h4>
                    <p>${prompt.description}</p>
                `;
                promptEl.onclick = () => {
                    document.getElementById('chat-input').value = prompt.description;
                    closePromptLibrary();
                };
                container.appendChild(promptEl);
            });
        }

        function filterPrompts() {
            const searchTerm = document.getElementById('prompt-search').value.toLowerCase();
            const promptItems = document.querySelectorAll('.prompt-item');
            
            promptItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        }

        function addWorkflowNode(type) {
            const canvas = document.getElementById('workflow-canvas');
            const node = document.createElement('div');
            node.className = 'workflow-node';
            
            const nodeTypes = {
                trigger: { emoji: '🎯', title: 'AMM Trigger', desc: 'Define when this workflow starts' },
                function: { emoji: '⚙️', title: 'Process Function', desc: 'Analyze or transform AMM data' },
                condition: { emoji: '❓', title: 'Decision Point', desc: 'Make decisions based on criteria' },
                output: { emoji: '📤', title: 'Action Output', desc: 'Execute AMM workflow action' }
            };
            
            const config = nodeTypes[type];
            node.innerHTML = `
                <h4>${config.emoji} ${config.title}</h4>
                <p>${config.desc}</p>
            `;
            
            node.style.top = Math.random() * 300 + 'px';
            node.style.left = Math.random() * 400 + 'px';
            
            canvas.appendChild(node);
            
            // Make node draggable
            makeDraggable(node);
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('prompt-modal');
            if (event.target == modal) {
                closePromptLibrary();
            }
        }

        // Make existing workflow nodes draggable
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.workflow-node').forEach(makeDraggable);
        });
    </script>
</body>
</html>
