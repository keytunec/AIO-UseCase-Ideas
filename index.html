<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Assistant Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .back-btn {
            background: #E20074;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #c50062;
            transform: translateY(-2px);
        }

        /* Landing Page Grid */
        .use-cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .use-case-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(226, 0, 116, 0.2);
            border-color: #E20074;
        }

        .use-case-card .emoji {
            font-size: 3rem;
            display: block;
            margin-bottom: 15px;
        }

        .use-case-card h3 {
            color: #E20074;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .use-case-card p {
            color: #666;
            line-height: 1.6;
        }

        /* Use Case View Layout */
        .use-case-view {
            display: none;
            height: calc(100vh - 100px);
        }

        .use-case-content {
            display: flex;
            height: 100%;
            gap: 20px;
        }

        .sidebar {
            width: 300px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .sidebar.collapsed {
            width: 60px;
            padding: 20px 10px;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .sidebar h3 {
            color: #333;
            font-size: 1.1rem;
        }

        .collapse-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #666;
        }

        .data-source {
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInUp 0.3s ease forwards;
        }

        .data-source label {
            display: flex;
            align-items: center;
            color: #555;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .data-source label:hover {
            background: #f0f7ff;
        }

        .data-source input {
            margin-right: 10px;
            accent-color: #E20074;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: white;
            color: #E20074;
            border-bottom: 2px solid #E20074;
        }

        .tab-content {
            display: none;
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        /* Chat Interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .message {
            margin-bottom: 20px;
            opacity: 0;
            animation: messageSlide 0.5s ease forwards;
        }

        .message.user {
            text-align: right;
        }

        .message-content {
            display: inline-block;
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.5;
        }

        .message.user .message-content {
            background: #E20074;
            color: white;
        }

        .message.assistant .message-content {
            background: #f1f3f5;
            color: #333;
        }

        .thinking-indicator {
            background: #e3f2fd;
            color: #1976d2;
            padding: 10px 15px;
            border-radius: 12px;
            margin: 10px 0;
            font-size: 13px;
            font-style: italic;
            animation: pulse 2s infinite;
        }

        .chat-input-area {
            padding: 20px;
            background: #f8f9fa;
        }

        .prompt-suggestions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .prompt-btn {
            background: #e3f2fd;
            color: #1976d2;
            border: 1px solid #bbdefb;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prompt-btn:hover {
            background: #bbdefb;
            transform: translateY(-1px);
        }

        .input-row {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: #E20074;
        }

        .send-btn {
            background: #E20074;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            background: #c50062;
            transform: scale(1.05);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .workflow-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .workflow-btn.active {
            opacity: 1;
        }

        .workflow-btn.active:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .prompt-library-btn {
            background: #9c27b0;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .prompt-library-btn:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }

        /* Workflow Editor */
        .workflow-editor {
            position: relative;
            height: 100%;
            background: #f5f7fa;
            border-radius: 8px;
            overflow: hidden;
        }

        .workflow-toolbar {
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .node-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .node-btn:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .workflow-canvas {
            position: relative;
            height: calc(100% - 70px);
            overflow: auto;
        }

        .workflow-node {
            position: absolute;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            min-width: 150px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: move;
            transition: all 0.3s ease;
        }

        .workflow-node:hover {
            border-color: #E20074;
            transform: scale(1.02);
        }

        .workflow-node h4 {
            color: #333;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .workflow-node p {
            color: #666;
            font-size: 12px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .prompt-search {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            margin-bottom: 20px;
            outline: none;
        }

        .prompt-search:focus {
            border-color: #E20074;
        }

        .prompt-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prompt-item:hover {
            background: #e9ecef;
            border-color: #E20074;
        }

        .prompt-item h4 {
            color: #E20074;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .prompt-item p {
            color: #666;
            font-size: 13px;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .use-case-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
            }
            
            .main-content {
                order: 1;
                height: 400px;
            }
            
            .prompt-suggestions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Landing Page -->
        <div id="landing-page">
            <div class="header">
                <h1>RAG Assistant Platform</h1>
                <p>Intelligent knowledge management and workflow automation for your organization</p>
            </div>
            
            <div class="use-cases-grid">
                <div class="use-case-card" onclick="openUseCase('onboarding')">
                    <span class="emoji">üëã</span>
                    <h3>Onboarding Assistant</h3>
                    <p>Guides new hires through setup, policies, and initial tasks to accelerate their integration into the team and company.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('tech-support')">
                    <span class="emoji">üßë‚Äçüíª</span>
                    <h3>Internal Tech Support</h3>
                    <p>Acts as the first line of defense for IT issues, providing instant solutions from knowledge bases and past support tickets.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('documentation')">
                    <span class="emoji">‚úçÔ∏è</span>
                    <h3>Release Documentation</h3>
                    <p>Automatically drafts release notes, changelogs, and user documentation directly from development and project management tools.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('codebase-qa')">
                    <span class="emoji">ü§ñ</span>
                    <h3>Codebase Q&A</h3>
                    <p>Allows developers to ask natural language questions about complex or legacy codebases to understand architecture and functionality.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('incident-postmortem')">
                    <span class="emoji">üîé</span>
                    <h3>Incident Post-Mortem</h3>
                    <p>Analyzes incident data from chat logs, monitoring tools, and ticket systems to generate a draft post-mortem report quickly.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('security-compliance')">
                    <span class="emoji">üõ°Ô∏è</span>
                    <h3>Security & Compliance</h3>
                    <p>Provides instant, accurate answers about security policies, data handling rules, and compliance requirements.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('sprint-planning')">
                    <span class="emoji">üìä</span>
                    <h3>Sprint Planning</h3>
                    <p>Leverages historical project data to help forecast team velocity, identify risks, and suggest tasks for upcoming sprints.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('expert-finder')">
                    <span class="emoji">üåê</span>
                    <h3>Expert Finder</h3>
                    <p>Discovers subject matter experts and locates specific information siloed across different business units and departments.</p>
                </div>
                
                <div class="use-case-card" onclick="openUseCase('api-assistant')">
                    <span class="emoji">üîå</span>
                    <h3>API Assistant</h3>
                    <p>Helps developers by answering questions about internal API endpoints, parameters, and authentication without needing to read lengthy documentation.</p>
                </div>
            </div>
        </div>

        <!-- Use Case View -->
        <div id="use-case-view" class="use-case-view">
            <button class="back-btn" onclick="showLandingPage()">‚Üê Back to Use Cases</button>
            
            <div class="use-case-content">
                <!-- Sidebar -->
                <div id="sidebar" class="sidebar">
                    <div class="sidebar-header">
                        <h3>Data Sources</h3>
                        <button class="collapse-btn" onclick="toggleSidebar()">‚Äπ‚Ä∫</button>
                    </div>
                    <div id="data-sources-list" class="data-sources-list">
                        <!-- Data sources will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Main Content -->
                <div class="main-content">
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('chat')">Chat Interface</button>
                        <button class="tab" onclick="switchTab('workflow')">Workflow Editor</button>
                    </div>

                    <!-- Chat Tab -->
                    <div id="chat-tab" class="tab-content active">
                        <div class="chat-container">
                            <div class="chat-messages" id="chat-messages">
                                <div class="message assistant">
                                    <div class="message-content">
                                        Hello! I'm your RAG assistant. How can I help you today? Feel free to use the suggested prompts below or ask me anything related to your selected use case.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chat-input-area">
                                <div class="prompt-suggestions" id="prompt-suggestions">
                                    <!-- Prompt suggestions will be populated by JavaScript -->
                                </div>
                                
                                <div class="input-row">
                                    <input type="text" id="chat-input" class="chat-input" placeholder="Type your message here..." onkeypress="handleKeyPress(event)">
                                    <button class="send-btn" onclick="sendMessage()">Send</button>
                                </div>
                                
                                <div class="action-buttons">
                                    <button id="workflow-btn" class="workflow-btn" onclick="runWorkflow()">Run Workflow</button>
                                    <button class="prompt-library-btn" onclick="openPromptLibrary()">Prompt Library</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Workflow Tab -->
                    <div id="workflow-tab" class="tab-content">
                        <div class="workflow-editor">
                            <div class="workflow-toolbar">
                                <button class="node-btn" onclick="addWorkflowNode('trigger')">+ Trigger</button>
                                <button class="node-btn" onclick="addWorkflowNode('function')">+ Function</button>
                                <button class="node-btn" onclick="addWorkflowNode('condition')">+ Condition</button>
                                <button class="node-btn" onclick="addWorkflowNode('output')">+ Output</button>
                            </div>
                            <div class="workflow-canvas" id="workflow-canvas">
                                <!-- Initial workflow nodes -->
                                <div class="workflow-node" style="top: 50px; left: 50px;">
                                    <h4>üéØ Chat Trigger</h4>
                                    <p>Activates when chat yields useful result</p>
                                </div>
                                <div class="workflow-node" style="top: 50px; left: 250px;">
                                    <h4>üîß Process Data</h4>
                                    <p>Analyzes and formats the result</p>
                                </div>
                                <div class="workflow-node" style="top: 50px; left: 450px;">
                                    <h4>üì§ Execute Action</h4>
                                    <p>Performs the configured workflow action</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Library Modal -->
    <div id="prompt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Prompt Library</h3>
                <button class="close-btn" onclick="closePromptLibrary()">&times;</button>
            </div>
            <input type="text" class="prompt-search" placeholder="Search prompts..." id="prompt-search" oninput="filterPrompts()">
            <div id="prompt-library-content">
                <!-- Prompt library items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Use case configurations
        const useCaseConfigs = {
            onboarding: {
                title: "Onboarding Assistant",
                dataSources: [
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "sharepoint", name: "SharePoint", checked: true },
                    { id: "azure-ad", name: "Company Directory (Azure AD)", checked: true },
                    { id: "slack", name: "Slack History", checked: false }
                ],
                promptSuggestions: [
                    "How do I set up my local development environment?",
                    "Summarize the code review process.",
                    "Who is the point of contact for the 'Phoenix' project?"
                ],
                workflowDescription: "Book a 30-minute introductory meeting with my assigned mentor and add it to both our calendars."
            },
            "tech-support": {
                title: "Internal Tech Support",
                dataSources: [
                    { id: "jira", name: "Jira Service Management", checked: true },
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "teams", name: "MS Teams History", checked: true },
                    { id: "logs", name: "System Logs", checked: true }
                ],
                promptSuggestions: [
                    "My VPN connection keeps dropping, what are the common fixes?",
                    "How do I request access to a production database?",
                    "I'm getting a 'Permission Denied' error when trying to deploy to staging."
                ],
                workflowDescription: "If no solution is found, create a high-priority ticket in Jira Service Management and assign it to the network team."
            },
            documentation: {
                title: "Release Documentation",
                dataSources: [
                    { id: "jira", name: "Jira", checked: true },
                    { id: "github", name: "GitHub/GitLab", checked: true },
                    { id: "confluence", name: "Confluence", checked: true }
                ],
                promptSuggestions: [
                    "Generate release notes for version 3.1 of our main application.",
                    "Create a summary of all API changes since the last release.",
                    "Draft a Confluence page for the new 'Analytics Dashboard' feature."
                ],
                workflowDescription: "Post the final release notes to the #announcements channel in MS Teams and create a new page in the 'Product Updates' Confluence space."
            },
            "codebase-qa": {
                title: "Codebase Q&A",
                dataSources: [
                    { id: "github", name: "GitHub/GitLab", checked: true },
                    { id: "confluence", name: "Architecture Docs", checked: true },
                    { id: "analysis", name: "Code Analysis Reports", checked: true }
                ],
                promptSuggestions: [
                    "Where is the authentication logic handled in the 'core-backend' service?",
                    "Explain the purpose of the BillingOrchestrator class.",
                    "Show me examples of how to use the data-export API."
                ],
                workflowDescription: "Generate a sequence diagram for the user login process based on the code and save it as a PNG file."
            },
            "incident-postmortem": {
                title: "Incident Post-Mortem Helper",
                dataSources: [
                    { id: "slack", name: "Slack/Teams Channels", checked: true },
                    { id: "pagerduty", name: "PagerDuty/Opsgenie", checked: true },
                    { id: "grafana", name: "Grafana/Datadog", checked: true },
                    { id: "jira", name: "Jira", checked: true }
                ],
                promptSuggestions: [
                    "Summarize the incident timeline for 'DB-FAILURE-0521'.",
                    "Identify key engineers involved in the resolution from the chat logs.",
                    "List the main remediation actions that were taken."
                ],
                workflowDescription: "Create a new post-mortem page in Confluence using our standard template, pre-filled with the generated timeline and action items."
            },
            "security-compliance": {
                title: "Security & Compliance Advisor",
                dataSources: [
                    { id: "sharepoint", name: "SharePoint (Policy Documents)", checked: true },
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "snyk", name: "Security Scanning Tools (Snyk)", checked: true }
                ],
                promptSuggestions: [
                    "Are we allowed to store user PII in log files?",
                    "What is the process for reporting a security vulnerability?",
                    "Summarize our data retention policy for customer data."
                ],
                workflowDescription: "Initiate the process for a new third-party library security review by creating a ticket in the security team's Jira project."
            },
            "sprint-planning": {
                title: "Sprint Planning Assistant",
                dataSources: [
                    { id: "jira", name: "Jira", checked: true },
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "github", name: "GitHub/GitLab", checked: true }
                ],
                promptSuggestions: [
                    "Analyze the last 3 sprints for the 'Mobile-App' team and predict the velocity.",
                    "Which stories in the backlog are missing acceptance criteria?",
                    "Identify developers with the most experience in our payment module."
                ],
                workflowDescription: "Generate a draft sprint in Jira containing the top 5 recommended user stories for the upcoming sprint."
            },
            "expert-finder": {
                title: "Expert Finder",
                dataSources: [
                    { id: "azure-ad", name: "Azure AD/LDAP", checked: true },
                    { id: "confluence", name: "Confluence", checked: true },
                    { id: "sharepoint", name: "SharePoint", checked: true },
                    { id: "teams", name: "MS Teams", checked: true }
                ],
                promptSuggestions: [
                    "Who is the expert on the new marketing analytics platform?",
                    "Find the latest quarterly sales report.",
                    "What are the technical specs for the upcoming 'Project Titan' integration?"
                ],
                workflowDescription: "Schedule a brief meeting via Teams with the identified expert to discuss my questions."
            },
            "api-assistant": {
                title: "API Assistant",
                dataSources: [
                    { id: "swagger", name: "Swagger/OpenAPI Specifications", checked: true },
                    { id: "postman", name: "Postman Collections", checked: true },
                    { id: "confluence", name: "Confluence", checked: true }
                ],
                promptSuggestions: [
                    "How do I create a new user via the API?",
                    "What are the required parameters for the /orders endpoint?",
                    "Show me an example JSON response for a failed payment."
                ],
                workflowDescription: "Generate a cURL command to test the 'create product' endpoint with dummy data and send it to me in a direct message on Slack."
            }
        };

        // Prompt library data
        const promptLibrary = [
            {
                title: "Data Analysis Prompt",
                description: "Analyze the data from the last 6 months and identify trends, patterns, and anomalies that could impact our decision-making process.",
                category: "analysis"
            },
            {
                title: "Code Review Assistant",
                description: "Review this code for best practices, security vulnerabilities, and performance optimizations. Provide specific suggestions for improvement.",
                category: "development"
            },
            {
                title: "Meeting Summary Generator",
                description: "Based on the meeting transcript, create a structured summary with action items, decisions made, and next steps for each participant.",
                category: "productivity"
            },
            {
                title: "Risk Assessment Framework",
                description: "Evaluate the potential risks associated with this project/decision and provide a comprehensive risk matrix with mitigation strategies.",
                category: "planning"
            },
            {
                title: "Documentation Template",
                description: "Create comprehensive technical documentation for this feature including API specs, usage examples, and troubleshooting guidelines.",
                category: "documentation"
            }
        ];

        let currentUseCase = null;
        let workflowActivated = false;

        function showLandingPage() {
            document.getElementById('landing-page').style.display = 'block';
            document.getElementById('use-case-view').style.display = 'none';
            currentUseCase = null;
        }

        function openUseCase(useCaseId) {
            currentUseCase = useCaseId;
            const config = useCaseConfigs[useCaseId];
            
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('use-case-view').style.display = 'block';
            
            // Update data sources
            const dataSourcesList = document.getElementById('data-sources-list');
            dataSourcesList.innerHTML = '';
            
            config.dataSources.forEach((source, index) => {
                const dataSourceEl = document.createElement('div');
                dataSourceEl.className = 'data-source';
                dataSourceEl.style.animationDelay = `${index * 0.1}s`;
                dataSourceEl.innerHTML = `
                    <label>
                        <input type="checkbox" ${source.checked ? 'checked' : ''} id="${source.id}">
                        ${source.name}
                    </label>
                `;
                dataSourcesList.appendChild(dataSourceEl);
            });
            
            // Update prompt suggestions
            const promptSuggestions = document.getElementById('prompt-suggestions');
            promptSuggestions.innerHTML = '';
            
            config.promptSuggestions.forEach(prompt => {
                const button = document.createElement('button');
                button.className = 'prompt-btn';
                button.textContent = prompt;
                button.onclick = () => usePrompt(prompt);
                promptSuggestions.appendChild(button);
            });
            
            // Reset chat
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.innerHTML = `
                <div class="message assistant">
                    <div class="message-content">
                        Hello! I'm your ${config.title}. How can I help you today? Feel free to use the suggested prompts below or ask me anything related to ${config.title.toLowerCase()}.
                    </div>
                </div>
            `;
            
            // Reset workflow button
            const workflowBtn = document.getElementById('workflow-btn');
            workflowBtn.classList.remove('active');
            workflowActivated = false;
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        function usePrompt(prompt) {
            document.getElementById('chat-input').value = prompt;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            const chatMessages = document.getElementById('chat-messages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<div class="message-content">${message}</div>`;
            chatMessages.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Simulate thinking and response
            setTimeout(() => {
                const thinkingEl = document.createElement('div');
                thinkingEl.className = 'thinking-indicator';
                thinkingEl.textContent = 'ü§î Analyzing your request and searching relevant data sources...';
                chatMessages.appendChild(thinkingEl);
                
                setTimeout(() => {
                    thinkingEl.textContent = 'üîç Found 12 relevant documents. Processing information...';
                    
                    setTimeout(() => {
                        thinkingEl.textContent = '‚ö° Generating response using retrieval-augmented generation...';
                        
                        setTimeout(() => {
                            thinkingEl.remove();
                            
                            // Add assistant response
                            const assistantMessage = document.createElement('div');
                            assistantMessage.className = 'message assistant';
                            assistantMessage.innerHTML = `
                                <div class="message-content">
                                    Based on the information from your configured data sources, I've found several relevant insights. 
                                    ${getContextualResponse(message)}
                                    
                                    <br><br>Would you like me to execute the associated workflow for this task?
                                </div>
                            `;
                            chatMessages.appendChild(assistantMessage);
                            
                            // Activate workflow button
                            document.getElementById('workflow-btn').classList.add('active');
                            workflowActivated = true;
                            
                            // Scroll to bottom
                            chatMessages.scrollTop = chatMessages.scrollHeight;
                        }, 1500);
                    }, 1000);
                }, 1000);
            }, 500);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getContextualResponse(message) {
            if (!currentUseCase) return "I can help you with that request.";
            
            const responses = {
                onboarding: "I've found the complete onboarding checklist and can guide you through setting up your development environment. The process typically takes 2-3 hours.",
                "tech-support": "I've identified 3 common solutions for this issue based on previous tickets. Let me walk you through the troubleshooting steps.",
                documentation: "I can generate comprehensive release documentation based on your recent commits and Jira tickets. This will include all feature changes and bug fixes.",
                "codebase-qa": "I've analyzed the codebase and found the relevant components. The authentication logic is distributed across multiple microservices.",
                "incident-postmortem": "I've compiled the incident timeline from multiple data sources. The root cause appears to be related to database connection pooling.",
                "security-compliance": "According to our security policies, this action requires additional approval. I can initiate the compliance review process.",
                "sprint-planning": "Based on the team's velocity data from the last 6 sprints, I recommend including 8-10 story points for the upcoming sprint.",
                "expert-finder": "I've identified 3 team members with expertise in this area. Sarah Johnson has the most experience with similar projects.",
                "api-assistant": "Here's the API endpoint documentation with example requests and responses. The authentication token is required in the header."
            };
            
            return responses[currentUseCase] || "I can help you with that request.";
        }

        function runWorkflow() {
            if (!workflowActivated) return;
            
            const config = useCaseConfigs[currentUseCase];
            
            const chatMessages = document.getElementById('chat-messages');
            const workflowMessage = document.createElement('div');
            workflowMessage.className = 'message assistant';
            workflowMessage.innerHTML = `
                <div class="message-content">
                    üîÑ Executing workflow: ${config.workflowDescription}
                    <br><br>
                    ‚úÖ Workflow completed successfully! The requested actions have been performed.
                </div>
            `;
            chatMessages.appendChild(workflowMessage);
            
            // Reset workflow button
            document.getElementById('workflow-btn').classList.remove('active');
            workflowActivated = false;
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function openPromptLibrary() {
            document.getElementById('prompt-modal').style.display = 'block';
            populatePromptLibrary();
        }

        function closePromptLibrary() {
            document.getElementById('prompt-modal').style.display = 'none';
        }

        function populatePromptLibrary() {
            const container = document.getElementById('prompt-library-content');
            container.innerHTML = '';
            
            promptLibrary.forEach(prompt => {
                const promptEl = document.createElement('div');
                promptEl.className = 'prompt-item';
                promptEl.innerHTML = `
                    <h4>${prompt.title}</h4>
                    <p>${prompt.description}</p>
                `;
                promptEl.onclick = () => {
                    document.getElementById('chat-input').value = prompt.description;
                    closePromptLibrary();
                };
                container.appendChild(promptEl);
            });
        }

        function filterPrompts() {
            const searchTerm = document.getElementById('prompt-search').value.toLowerCase();
            const promptItems = document.querySelectorAll('.prompt-item');
            
            promptItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        }

        function addWorkflowNode(type) {
            const canvas = document.getElementById('workflow-canvas');
            const node = document.createElement('div');
            node.className = 'workflow-node';
            
            const nodeTypes = {
                trigger: { emoji: 'üéØ', title: 'New Trigger', desc: 'Define when this workflow starts' },
                function: { emoji: '‚öôÔ∏è', title: 'New Function', desc: 'Process or transform data' },
                condition: { emoji: '‚ùì', title: 'New Condition', desc: 'Make decisions based on data' },
                output: { emoji: 'üì§', title: 'New Output', desc: 'Send results or notifications' }
            };
            
            const config = nodeTypes[type];
            node.innerHTML = `
                <h4>${config.emoji} ${config.title}</h4>
                <p>${config.desc}</p>
            `;
            
            node.style.top = Math.random() * 300 + 'px';
            node.style.left = Math.random() * 400 + 'px';
            
            canvas.appendChild(node);
            
            // Make node draggable
            makeDraggable(node);
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('prompt-modal');
            if (event.target == modal) {
                closePromptLibrary();
            }
        }

        // Make existing workflow nodes draggable
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.workflow-node').forEach(makeDraggable);
        });
    </script>
</body>
</html>
